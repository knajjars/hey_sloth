<h1>Collect#twitter_post</h1>

<h2>Paste the Twitter Post URL here:</h2>
<%= form_with url: collect_twitter_post_new_path, method: :get do |form| %>
  <%= form.label :tweet_url, "Tweet URL:" %>
  <%= form.text_field :tweet_url, required: true, autofocus: true, type: :url, placeholder: "https://twitter.com/elonmusk/status/1336351038106869760" %>
  <%= form.submit "Search" %>
<% end %>

<% if @tweet %>
  <%= embed_tweet(@tweet) %>
  <%= form_with url: collect_twitter_post_create_path, method: :post do |form| %>
    <%= form.hidden_field :tweet, value: { user_name: @tweet.user.name, text: @tweet.full_text, status: @tweet.id, url: @tweet.url, user_id: @tweet.user.id, image_url: @tweet.user.profile_image_url_https(:original) }.to_json %>
    <%= form.submit "Collect" %>
  <% end %>
<% end %>

<%= link_to 'Back', collect_path %>